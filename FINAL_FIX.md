# –§–ò–ù–ê–õ–¨–ù–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï - –ü—Ä–æ–±–ª–µ–º–∞ –Ω–∞–π–¥–µ–Ω–∞! üéØ

## –ü—Ä–æ–±–ª–µ–º–∞

–ú–∞—Ä—à—Ä—É—Ç `/api/credits/:id` –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–ª –∑–∞–ø—Ä–æ—Å—ã –∫ `/api/credits/totals-by-type` –∏ –ø—ã—Ç–∞–ª—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `"totals-by-type"` –∫–∞–∫ UUID.

**–û—à–∏–±–∫–∞ –∏–∑ –ª–æ–≥–æ–≤:**
```
Error fetching credit: error: invalid input syntax for type uuid: "totals-by-type"
```

## –ß—Ç–æ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

–î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤ –º–∞—Ä—à—Ä—É—Ç `/api/credits/:id` —á—Ç–æ–±—ã –æ–Ω –ø—Ä–æ–ø—É—Å–∫–∞–ª —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ endpoints:

```javascript
app.get('/api/credits/:id', async (req, res, next) => {
  try {
    const { id } = req.params;
    // Skip to next route for special endpoints
    if (id === 'by-contract' || id === 'totals-by-type' || id === 'totals-by-type-test') {
      return next();
    }
    // ... rest of the code
```

## –ö–∞–∫ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä

### –í–∞—Ä–∏–∞–Ω—Ç 1: –í—Ä—É—á–Ω—É—é

```bash
# 1. –ù–∞–π—Ç–∏ –ø—Ä–æ—Ü–µ—Å—Å –Ω–∞ –ø–æ—Ä—Ç—É 3001
netstat -ano | Select-String ":3001"

# 2. –£–±–∏—Ç—å –ø—Ä–æ—Ü–µ—Å—Å (–∑–∞–º–µ–Ω–∏—Ç–µ PID –Ω–∞ –Ω–æ–º–µ—Ä –∏–∑ –ø—Ä–µ–¥—ã–¥—É—â–µ–π –∫–æ–º–∞–Ω–¥—ã)
Stop-Process -Id PID -Force

# 3. –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä
npm run server
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ (–†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø)

```powershell
.\restart-server.ps1
```

–≠—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç:
1. –ù–∞–π–¥–µ—Ç –≤—Å–µ –ø—Ä–æ—Ü–µ—Å—Å—ã –Ω–∞ –ø–æ—Ä—Ç—É 3001
2. –£–±—å–µ—Ç –∏—Ö
3. –ü—Ä–µ–¥–ª–æ–∂–∏—Ç –∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä

## –ü–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞

### –¢–µ—Å—Ç 1: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π endpoint

```bash
curl http://localhost:3001/api/credits/totals-by-type-test
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```json
{"test":"working","investment":0,"working_capital":0,"total":0}
```

**–õ–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞ –¥–æ–ª–∂–Ω—ã –ø–æ–∫–∞–∑–∞—Ç—å:**
```
=== TEST endpoint called ===
```

### –¢–µ—Å—Ç 2: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Å–Ω–æ–≤–Ω–æ–π endpoint

```bash
node test-endpoint.cjs
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
Status: 200
Body: {"investment":25000000,"working_capital":10000000,"total":35000000}
```

**–õ–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞ –¥–æ–ª–∂–Ω—ã –ø–æ–∫–∞–∑–∞—Ç—å:**
```
=== GET /api/credits/totals-by-type called ===
Executing query...
Query result: [...]
Processing row: working_capital = 10000000
Processing row: investment = 25000000
Sending response: {"investment":25000000,"working_capital":10000000,"total":35000000}
```

### –¢–µ—Å—Ç 3: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤ –±—Ä–∞—É–∑–µ—Ä–µ

–û—Ç–∫—Ä–æ–π—Ç–µ Dashboard:
```
http://localhost:8091/
```

–î–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å –±–µ–∑ –æ—à–∏–±–æ–∫!

## –ü–æ—á–µ–º—É —ç—Ç–æ –ø—Ä–æ–∏–∑–æ—à–ª–æ

Express –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –º–∞—Ä—à—Ä—É—Ç—ã –≤ –ø–æ—Ä—è–¥–∫–µ –∏—Ö –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è. –ö–æ–≥–¥–∞ –∑–∞–ø—Ä–æ—Å –ø—Ä–∏—Ö–æ–¥–∏—Ç –Ω–∞ `/api/credits/totals-by-type`:

1. **–î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
   - Express –ø—Ä–æ–≤–µ—Ä—è–µ—Ç `/api/credits` - –Ω–µ –ø–æ–¥—Ö–æ–¥–∏—Ç
   - Express –ø—Ä–æ–≤–µ—Ä—è–µ—Ç `/api/credits/totals-by-type` - –ø–æ–¥—Ö–æ–¥–∏—Ç, –Ω–æ...
   - Express –ø—Ä–æ–≤–µ—Ä—è–µ—Ç `/api/credits/:id` - —Ç–æ–∂–µ –ø–æ–¥—Ö–æ–¥–∏—Ç! (`:id` = `"totals-by-type"`)
   - –ü–µ—Ä–≤—ã–π –ø–æ–¥—Ö–æ–¥—è—â–∏–π –º–∞—Ä—à—Ä—É—Ç –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è - —ç—Ç–æ –±—ã–ª `:id`
   - –ú–∞—Ä—à—Ä—É—Ç –ø—ã—Ç–∞–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `"totals-by-type"` –∫–∞–∫ UUID ‚Üí –æ—à–∏–±–∫–∞

2. **–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
   - Express –ø—Ä–æ–≤–µ—Ä—è–µ—Ç `/api/credits` - –Ω–µ –ø–æ–¥—Ö–æ–¥–∏—Ç
   - Express –ø—Ä–æ–≤–µ—Ä—è–µ—Ç `/api/credits/totals-by-type` - –ø–æ–¥—Ö–æ–¥–∏—Ç, –Ω–æ...
   - Express –ø—Ä–æ–≤–µ—Ä—è–µ—Ç `/api/credits/:id` - –ø–æ–¥—Ö–æ–¥–∏—Ç, –Ω–æ –≤—ã–∑—ã–≤–∞–µ—Ç `next()`
   - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –∫ `/api/credits/totals-by-type` - –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è!

## –í–∞–∂–Ω–æ!

–°–µ—Ä–≤–µ—Ä –î–û–õ–ñ–ï–ù –±—ã—Ç—å –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω, –∏–Ω–∞—á–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –Ω–µ –ø—Ä–∏–º–µ–Ω—è—Ç—Å—è!

## –ü—Ä–æ–≤–µ—Ä–æ—á–Ω—ã–π —Å–ø–∏—Å–æ–∫

–ü–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞:

- [ ] –¢–µ—Å—Ç–æ–≤—ã–π endpoint —Ä–∞–±–æ—Ç–∞–µ—Ç (`totals-by-type-test`)
- [ ] –û—Å–Ω–æ–≤–Ω–æ–π endpoint —Ä–∞–±–æ—Ç–∞–µ—Ç (`totals-by-type`)
- [ ] –õ–æ–≥–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ
- [ ] Dashboard –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –æ—à–∏–±–æ–∫
- [ ] –ú–æ–∂–Ω–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∫—Ä–µ–¥–∏—Ç—ã

## –ï—Å–ª–∏ –≤—Å–µ –µ—â–µ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

1. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ —Å–µ—Ä–≤–µ—Ä –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –Ω–µ—Ç –¥—Ä—É–≥–∏—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –Ω–∞ –ø–æ—Ä—Ç—É 3001:
   ```bash
   netstat -ano | Select-String ":3001"
   ```
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ
4. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –º–Ω–µ –Ω–æ–≤—ã–µ –ª–æ–≥–∏

---

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≥–æ—Ç–æ–≤–æ! –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä –∏ –≤—Å–µ –∑–∞—Ä–∞–±–æ—Ç–∞–µ—Ç!** ‚úÖ
