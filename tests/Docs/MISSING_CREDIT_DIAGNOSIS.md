# Диагностика: Кредит GA202503S805/3524/27 не найден в интерфейсе

## Проблема
Кредит с номером GA202503S805/3524/27 не отображается в интерфейсе, хотя есть похожие кредиты GA202503S805/3524/2.

## Возможные причины

### 1. Кредит не существует в базе данных
Кредит с номером GA202503S805/3524/27 может просто не быть создан в системе.

### 2. Опечатка в номере кредита
Возможно, правильный номер кредита GA202503S805/3524/2 (без цифры 7 в конце).

### 3. Кредит скрыт фильтрами
Кредит может быть отфильтрован по статусу или другим критериям в интерфейсе.

### 4. Проблема с загрузкой данных
Ошибка в API или проблема с подключением к базе данных.

## Диагностика

### Шаг 1: Проверить все кредиты с похожим номером

Откройте в браузере: `http://localhost:3001/api/debug/credits-ga`

Этот эндпоинт покажет все кредиты, начинающиеся с GA202503S805.

**Ожидаемый результат:**
```json
{
  "total": 2,
  "credits": [
    {
      "id": "xxx",
      "contract_number": "GA202503S805/3524/2",
      "principal": "xxx",
      "start_date": "xxx",
      "method": "floating_differentiated",
      "bank_id": "xxx"
    },
    {
      "id": "yyy", 
      "contract_number": "GA202503S805/3524/27",
      "principal": "yyy",
      "start_date": "yyy",
      "method": "floating_differentiated",
      "bank_id": "yyy"
    }
  ]
}
```

### Шаг 2: Проверить интерфейс списка кредитов

1. Откройте страницу кредитов: `http://localhost:8091/credits`
2. Проверьте фильтры:
   - Убедитесь, что выбран фильтр "Все"
   - Попробуйте поиск по номеру: "GA202503S805"
3. Проверьте, отображается ли кредит в списке

### Шаг 3: Проверить API кредитов

Откройте в браузере: `http://localhost:3001/api/credits`

Найдите в ответе кредиты с номерами GA202503S805/3524/*.

### Шаг 4: Проверить консоль браузера

1. Откройте DevTools (F12)
2. Перейдите на вкладку Console
3. Обновите страницу кредитов
4. Проверьте, есть ли ошибки JavaScript

## Возможные решения

### Решение 1: Кредит не существует - создать его

Если кредит GA202503S805/3524/27 не найден в базе данных, нужно его создать:

1. Перейти на страницу создания кредита
2. Ввести правильные данные
3. Сохранить кредит

### Решение 2: Исправить номер кредита

Если правильный номер GA202503S805/3524/2 (без 7), то:

1. Использовать существующий кредит GA202503S805/3524/2
2. Или переименовать существующий кредит, если нужно

### Решение 3: Проверить права доступа

Возможно, кредит существует, но не отображается из-за прав доступа:

```sql
-- Проверить все кредиты в БД
SELECT id, contract_number, principal, start_date, method 
FROM credits 
WHERE contract_number LIKE 'GA202503S805%'
ORDER BY contract_number;
```

### Решение 4: Исправить фильтрацию в интерфейсе

Если кредит есть в API, но не отображается в интерфейсе, проверить:

1. Функцию `filteredCredits` в `Credits.tsx`
2. Условия фильтрации по статусу
3. Функцию поиска

## Быстрая проверка

**Выполните эти команды в консоли браузера на странице кредитов:**

```javascript
// Проверить загруженные кредиты
console.log('Loaded credits:', window.credits);

// Проверить фильтры
console.log('Search term:', document.querySelector('input[placeholder*="Поиск"]').value);

// Найти кредиты с GA202503S805
fetch('/api/credits')
  .then(r => r.json())
  .then(credits => {
    const gaCredits = credits.filter(c => c.contract_number?.includes('GA202503S805'));
    console.log('GA credits from API:', gaCredits);
  });
```

## Файлы изменены
- `server.js` - добавлен debug эндпоинт `/api/debug/credits-ga` (строки ~1185-1200)

## Следующие шаги

1. **Проверьте debug эндпоинт** - это покажет, есть ли кредит в БД
2. **Если кредита нет** - создайте его через интерфейс
3. **Если кредит есть, но не отображается** - проверьте фильтры и консоль браузера
4. **Если нужна помощь** - покажите результат debug эндпоинта

## Ошибка браузера

Ошибка "A listener indicated an asynchronous response by returning true, but the message channel closed before a response was received" обычно связана с расширениями браузера или проблемами с WebSocket соединениями. Она не должна влиять на основную функциональность.

Для устранения:
1. Отключите расширения браузера
2. Очистите кэш браузера
3. Перезапустите браузер
4. Попробуйте в режиме инкогнито