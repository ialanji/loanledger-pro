# üìä –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ –≥–æ–¥–∞–º –≤ –ø—Ä–æ–≥–Ω–æ–∑–µ –ø–ª–∞—Ç–µ–∂–µ–π

## üéØ –û–ø–∏—Å–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏

–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –Ω–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏ –¥–∞–Ω–Ω—ã—Ö –ø–æ –≥–æ–¥–∞–º –≤ –æ—Ç—á–µ—Ç–µ **"–ü—Ä–æ–≥–Ω–æ–∑ –ø–ª–∞—Ç–µ–∂–µ–π"** –ø—Ä–∏ –≤—ã–±–æ—Ä–µ —Ñ–æ—Ä–º—ã **"–¢–∞–±–ª–∏—Ü–∞"**.

## ‚ú® –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å

### –î–æ –∏–∑–º–µ–Ω–µ–Ω–∏–π:
- –¢–∞–±–ª–∏—á–Ω—ã–π –≤–∏–¥ –ø–æ–∫–∞–∑—ã–≤–∞–ª –≤—Å–µ –º–µ—Å—è—Ü—ã –≤ –æ–¥–Ω–æ–π —Ç–∞–±–ª–∏—Ü–µ
- –î–∞–Ω–Ω—ã–µ –æ—Ç–æ–±—Ä–∞–∂–∞–ª–∏—Å—å –≤ —Ö—Ä–æ–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–º –ø–æ—Ä—è–¥–∫–µ –±–µ–∑ –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏
- –ò—Ç–æ–≥–∏ –ø–æ–¥–≤–æ–¥–∏–ª–∏—Å—å —Ç–æ–ª—å–∫–æ –≤ –∫–æ–Ω—Ü–µ —Ç–∞–±–ª–∏—Ü—ã

### –ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π:
- **–ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ –≥–æ–¥–∞–º**: –∫–∞–∂–¥—ã–π –≥–æ–¥ –≤—ã–¥–µ–ª–µ–Ω –≤ –æ—Ç–¥–µ–ª—å–Ω—É—é —Å–µ–∫—Ü–∏—é
- **–ò—Ç–æ–≥–∏ –ø–æ –≥–æ–¥–∞–º**: –ø–æ–¥ –∫–∞–∂–¥—ã–º –≥–æ–¥–æ–º –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–µ –∏—Ç–æ–≥–∏
- **–û–±—â–∏–µ –∏—Ç–æ–≥–∏**: –≤ –∫–æ–Ω—Ü–µ –æ—Ç—á–µ—Ç–∞ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è —Å—É–º–º–∞—Ä–Ω—ã–µ –∏—Ç–æ–≥–∏ –ø–æ –≤—Å–µ–º –≥–æ–¥–∞–º
- **–£–ª—É—á—à–µ–Ω–Ω–∞—è —á–∏—Ç–∞–µ–º–æ—Å—Ç—å**: —á–µ—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø–æ –≤—Ä–µ–º–µ–Ω–Ω—ã–º –ø–µ—Ä–∏–æ–¥–∞–º

## üõ†Ô∏è –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

### –ù–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è `transformToYearlyPivotTable`

```typescript
const transformToYearlyPivotTable = (items: any[]) => {
  // –ì—Ä—É–ø–ø–∏—Ä—É–µ—Ç –¥–∞–Ω–Ω—ã–µ –ø–æ –≥–æ–¥–∞–º
  // –°–æ–∑–¥–∞–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É: –≥–æ–¥ -> –º–µ—Å—è—Ü—ã -> –±–∞–Ω–∫–∏ -> —Å—É–º–º—ã
  // –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç –∏—Ç–æ–≥–∏ –ø–æ –≥–æ–¥–∞–º –∏ –æ–±—â–∏–µ –∏—Ç–æ–≥–∏
}
```

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö:
```typescript
{
  yearStr: "2025",
  year: 2025,
  months: {
    "2025-10": {
      month: "10",
      monthName: "–æ–∫—Ç—è–±—Ä—å",
      banks: {
        "MAIB Bank": { principal: 333333.33, interest: 21917.81 }
      },
      totals: { principal: 333333.33, interest: 21917.81 }
    }
  },
  totals: { principal: 1000000, interest: 50000 }
}
```

## üìã –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è

### 1. –ó–∞–≥–æ–ª–æ–≤–æ–∫ –≥–æ–¥–∞
```
–ì–æ–¥: 2025
```

### 2. –¢–∞–±–ª–∏—Ü–∞ –º–µ—Å—è—Ü–µ–≤ –≥–æ–¥–∞
| –ú–µ—Å—è—Ü | MAIB Bank |  | –ò—Ç–æ–≥–æ |  |
|-------|-----------|--|-------|--|
|       | –û—Å—Ç–∞—Ç–æ–∫ –¥–æ–ª–≥–∞ | –ü—Ä–æ—Ü–µ–Ω—Ç—ã | –û—Å—Ç–∞—Ç–æ–∫ –¥–æ–ª–≥–∞ | –ü—Ä–æ—Ü–µ–Ω—Ç—ã |
| –æ–∫—Ç—è–±—Ä—å | 333,333.33 | 21,917.81 | 333,333.33 | 21,917.81 |
| –Ω–æ—è–±—Ä—å | 333,333.33 | 20,383.56 | 333,333.33 | 20,383.56 |

### 3. –ò—Ç–æ–≥–∏ –ø–æ –≥–æ–¥—É
| –ò—Ç–æ–≥–æ –ø–æ –≥–æ–¥—É: | 666,666.66 | 42,301.37 | 666,666.66 | 42,301.37 |

### 4. –û–±—â–∏–µ –∏—Ç–æ–≥–∏ –ø–æ –≤—Å–µ–º –≥–æ–¥–∞–º
| –ë–∞–Ω–∫ | –û—Å—Ç–∞—Ç–æ–∫ –¥–æ–ª–≥–∞ | –ü—Ä–æ—Ü–µ–Ω—Ç—ã | –í—Å–µ–≥–æ |
|------|---------------|----------|-------|
| MAIB Bank | 2,000,000.00 | 150,000.00 | 2,150,000.00 |
| **–ò–¢–û–ì–û:** | **2,000,000.00** | **150,000.00** | **2,150,000.00** |

## üé® –í–∏–∑—É–∞–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

- **–¶–≤–µ—Ç–æ–≤–æ–µ –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ**: —Ä–∞–∑–Ω—ã–µ —Ü–≤–µ—Ç–∞ –¥–ª—è –∏—Ç–æ–≥–æ–≤ –ø–æ –≥–æ–¥–∞–º –∏ –æ–±—â–∏—Ö –∏—Ç–æ–≥–æ–≤
- **–û—Ç—Å—Ç—É–ø—ã –∏ –≥—Ä–∞–Ω–∏—Ü—ã**: —á–µ—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ —Å–µ–∫—Ü–∏–π
- **–¢–∏–ø–æ–≥—Ä–∞—Ñ–∏–∫–∞**: –∑–∞–≥–æ–ª–æ–≤–∫–∏ –≥–æ–¥–æ–≤ –≤—ã–¥–µ–ª–µ–Ω—ã –∂–∏—Ä–Ω—ã–º —à—Ä–∏—Ñ—Ç–æ–º
- **–ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å**: —Ç–∞–±–ª–∏—Ü—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –Ω–∞ —Ä–∞–∑–Ω—ã—Ö —ç–∫—Ä–∞–Ω–∞—Ö

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –°–æ–∑–¥–∞–Ω—ã E2E —Ç–µ—Å—Ç—ã:
- `tests/e2e/reports-yearly-grouping.spec.js`
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏ –ø–æ –≥–æ–¥–∞–º
- –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å–ø–∏—Å–æ—á–Ω–æ–≥–æ –∏ —Ç–∞–±–ª–∏—á–Ω–æ–≥–æ –≤–∏–¥–æ–≤
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ –∏—Ç–æ–≥–æ–≤
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–∑—ã–≤—á–∏–≤–æ—Å—Ç–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞

### –ö–æ–º–∞–Ω–¥—ã –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:
```bash
# –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–æ–≤
npm run dev:full

# E2E —Ç–µ—Å—Ç—ã –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏
npx playwright test tests/e2e/reports-yearly-grouping.spec.js

# –í—Å–µ E2E —Ç–µ—Å—Ç—ã
npm run test:e2e
```

## üìä –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –Ω–æ–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏

### ‚úÖ –î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:
- **–õ—É—á—à–∞—è —á–∏—Ç–∞–µ–º–æ—Å—Ç—å**: –¥–∞–Ω–Ω—ã–µ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω—ã –ø–æ –≥–æ–¥–∞–º
- **–ë—ã—Å—Ç—Ä—ã–π –∞–Ω–∞–ª–∏–∑**: –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–µ –∏—Ç–æ–≥–∏ –ø–æ –≥–æ–¥–∞–º
- **–£–¥–æ–±—Å—Ç–≤–æ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è**: —á–µ—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –ø–æ –≤—Ä–µ–º–µ–Ω–Ω—ã–º –ø–µ—Ä–∏–æ–¥–∞–º
- **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏**: —Å–ø–∏—Å–æ—á–Ω—ã–π –≤–∏–¥ –æ—Å—Ç–∞–ª—Å—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π

### ‚úÖ –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤:
- **–ú–æ–¥—É–ª—å–Ω–æ—Å—Ç—å**: –Ω–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è –Ω–µ –∑–∞—Ç—Ä–∞–≥–∏–≤–∞–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥
- **–¢–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å**: –ø–æ–∫—Ä—ã—Ç–æ E2E —Ç–µ—Å—Ç–∞–º–∏
- **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å**: –ª–µ–≥–∫–æ –¥–æ–±–∞–≤–∏—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏
- **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ

## üîÑ –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

- **–°–ø–∏—Å–æ—á–Ω—ã–π –≤–∏–¥**: –æ—Å—Ç–∞–ª—Å—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π
- **API**: —Å–µ—Ä–≤–µ—Ä–Ω–∞—è —á–∞—Å—Ç—å –Ω–µ –∏–∑–º–µ–Ω—è–ª–∞—Å—å
- **–§–∏–ª—å—Ç—Ä—ã**: –≤—Å–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ñ–∏–ª—å—Ç—Ä—ã —Ä–∞–±–æ—Ç–∞—é—Ç –∫–∞–∫ –ø—Ä–µ–∂–¥–µ
- **–≠–∫—Å–ø–æ—Ä—Ç**: —Ñ—É–Ω–∫—Ü–∏–∏ —ç–∫—Å–ø–æ—Ä—Ç–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã

## üöÄ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

1. –û—Ç–∫—Ä–æ–π—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É **–û—Ç—á–µ—Ç—ã**
2. –í—ã–±–µ—Ä–∏—Ç–µ **"–ü—Ä–æ–≥–Ω–æ–∑ –ø–ª–∞—Ç–µ–∂–µ–π"**
3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Ñ–æ—Ä–º—É –æ—Ç—á–µ—Ç–∞ **"–¢–∞–±–ª–∏—Ü–∞"**
4. –ù–∞–∂–º–∏—Ç–µ **"–°–æ–∑–¥–∞—Ç—å –æ—Ç—á–µ—Ç"**
5. –ù–∞—Å–ª–∞–∂–¥–∞–π—Ç–µ—Å—å –Ω–æ–≤–æ–π –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–æ–π –ø–æ –≥–æ–¥–∞–º!

## üìù –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–§—É–Ω–∫—Ü–∏—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏ –ø–æ –≥–æ–¥–∞–º –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —É–ª—É—á—à–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –æ–ø—ã—Ç –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã–º–∏ —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–º–∏ –ø—Ä–æ–≥–Ω–æ–∑–∞–º–∏, –¥–µ–ª–∞—è –¥–∞–Ω–Ω—ã–µ –±–æ–ª–µ–µ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ –∏ –ø–æ–Ω—è—Ç–Ω—ã–º–∏ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞.

**–î–∞—Ç–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:** 6 –æ–∫—Ç—è–±—Ä—è 2025  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é